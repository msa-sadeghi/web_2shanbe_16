<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Tahoma, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .game-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
        }
        
        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-box {
            text-align: center;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 10px;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .game-area {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .mystery-number {
            text-align: center;
            font-size: 72px;
            color: #667eea;
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .input-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        input {
            flex: 1;
            padding: 15px;
            font-size: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        button {
            padding: 15px 30px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .btn-check {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-again {
            background: #4caf50;
            color: white;
            width: 100%;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .message {
            text-align: center;
            font-size: 20px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .history {
            background: white;
            padding: 20px;
            border-radius: 10px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .history h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .history-item {
            padding: 10px;
            background: #f5f5f5;
            border-radius: 5px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .emoji-animation {
            font-size: 100px;
            position: fixed;
            animation: float 2s ease-out;
            pointer-events: none;
        }
        
        @keyframes float {
            0% {
                transform: translateY(0) scale(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) scale(1.5);
                opacity: 0;
            }
        }
        
        .win-celebration {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #4caf50 0%, #8bc34a 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 20px;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>ğŸ² Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯</h1>
        <p class="subtitle">Ø¹Ø¯Ø¯ÛŒ Ø¨ÛŒÙ† 1 ØªØ§ 100 Ø±Ø§ Ø­Ø¯Ø³ Ø¨Ø²Ù†ÛŒØ¯!</p>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">Ø§Ù…ØªÛŒØ§Ø²</div>
                <div class="stat-value" id="score">20</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Ø¨Ù‡ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²</div>
                <div class="stat-value" id="highscore">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø§Ø²ÛŒ</div>
                <div class="stat-value" id="gamesPlayed">0</div>
            </div>
        </div>
        
        <div class="game-area">
            <div class="mystery-number" id="mysteryNumber">?</div>
            
            <div class="input-section">
                <input type="number" id="guessInput" min="1" max="100" placeholder="Ø¹Ø¯Ø¯ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯">
                <button class="btn-check" id="checkBtn">Ø¨Ø±Ø±Ø³ÛŒ</button>
            </div>
            
            <div class="message" id="message">
                ğŸ¯ Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯!
            </div>
        </div>
        
        <button class="btn-again" id="againBtn">ğŸ”„ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯</button>
        
        <div class="history">
            <h3>ğŸ“œ ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø­Ø¯Ø³â€ŒÙ‡Ø§</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
        let secretNumber;
        let score = 20;
        let highscore = parseInt(localStorage.getItem('highscore')) || 0;
        let gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
        let guesses = [];
        let isPlaying = true;
        
        // Ø¹Ù†Ø§ØµØ± DOM
        const guessInput = document.getElementById('guessInput');
        const checkBtn = document.getElementById('checkBtn');
        const againBtn = document.getElementById('againBtn');
        const message = document.getElementById('message');
        const mysteryNumber = document.getElementById('mysteryNumber');
        const scoreDisplay = document.getElementById('score');
        const highscoreDisplay = document.getElementById('highscore');
        const gamesPlayedDisplay = document.getElementById('gamesPlayed');
        const historyList = document.getElementById('historyList');
        
        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        highscoreDisplay.textContent = highscore;
        gamesPlayedDisplay.textContent = gamesPlayed;
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
        function startNewGame() {
            secretNumber = Math.floor(Math.random() * 100) + 1;
            score = 20;
            guesses = [];
            isPlaying = true;
            
            mysteryNumber.textContent = '?';
            scoreDisplay.textContent = score;
            guessInput.value = '';
            guessInput.disabled = false;
            checkBtn.disabled = false;
            historyList.innerHTML = '';
            
            message.textContent = 'ğŸ¯ Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯!';
            message.style.background = 'white';
            message.style.color = 'black';
            
            document.body.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            
            guessInput.focus();
        }
        
        // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
        function displayMessage(msg, emoji = '') {
            message.textContent = emoji + ' ' + msg;
        }
        
        // Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ ØªØ§Ø±ÛŒØ®Ú†Ù‡
        function addToHistory(guess, feedback) {
            const historyItem = document.createElement('div');
            historyItem.className = 'history-item';
            historyItem.innerHTML = `
                <span>Ø­Ø¯Ø³: ${guess}</span>
                <span>${feedback}</span>
            `;
            historyList.insertBefore(historyItem, historyList.firstChild);
        }
        
        // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø§ÛŒÙ…ÙˆØ¬ÛŒ
        function showEmojiAnimation(emoji) {
            const emojiEl = document.createElement('div');
            emojiEl.className = 'emoji-animation';
            emojiEl.textContent = emoji;
            emojiEl.style.left = Math.random() * window.innerWidth + 'px';
            emojiEl.style.top = window.innerHeight + 'px';
            document.body.appendChild(emojiEl);
            
            setTimeout(() => {
                emojiEl.remove();
            }, 2000);
        }
        
        // Ø¨Ø±Ø±Ø³ÛŒ Ø­Ø¯Ø³
        function checkGuess() {
            if (!isPlaying) return;
            
            const guess = Number(guessInput.value);
            
            // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
            if (!guess || guess < 1 || guess > 100) {
                displayMessage('Ø¹Ø¯Ø¯ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† 1 ØªØ§ 100 Ø¨Ø§Ø´Ø¯!', 'âš ï¸');
                showEmojiAnimation('âš ï¸');
                return;
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ
            if (guesses.includes(guess)) {
                displayMessage('Ø§ÛŒÙ† Ø¹Ø¯Ø¯ Ø±Ø§ Ù‚Ø¨Ù„Ø§Ù‹ Ø­Ø¯Ø³ Ø²Ø¯Ù‡â€ŒØ§ÛŒØ¯!', 'ğŸ”„');
                return;
            }
            
            guesses.push(guess);
            
            // Ø­Ø¯Ø³ Ø¯Ø±Ø³Øª
            if (guess === secretNumber) {
                isPlaying = false;
                displayMessage('ğŸ‰ Ø¢ÙØ±ÛŒÙ†! Ø¯Ø±Ø³Øª Ø­Ø¯Ø³ Ø²Ø¯ÛŒØ¯!', '');
                mysteryNumber.textContent = secretNumber;
                
                message.style.background = 'linear-gradient(135deg, #4caf50 0%, #8bc34a 100%)';
                message.style.color = 'white';
                document.body.style.background = 'linear-gradient(135deg, #4caf50 0%, #8bc34a 100%)';
                
                guessInput.disabled = true;
                checkBtn.disabled = true;
                
                // Ø°Ø®ÛŒØ±Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø²
                if (score > highscore) {
                    highscore = score;
                    highscoreDisplay.textContent = highscore;
                    localStorage.setItem('highscore', highscore);
                }
                
                gamesPlayed++;
                gamesPlayedDisplay.textContent = gamesPlayed;
                localStorage.setItem('gamesPlayed', gamesPlayed);
                
                addToHistory(guess, 'âœ… Ø¯Ø±Ø³Øª!');
                
                // Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ø¨Ø±Ø¯
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        showEmojiAnimation(['ğŸ‰', 'ğŸŠ', 'ğŸ†', 'â­', 'ğŸ¯'][Math.floor(Math.random() * 5)]);
                    }, i * 200);
                }
            }
            // Ø­Ø¯Ø³ Ù†Ø§Ø¯Ø±Ø³Øª
            else {
                score--;
                scoreDisplay.textContent = score;
                
                if (score === 0) {
                    isPlaying = false;
                    displayMessage(`ğŸ’¥ Ø¨Ø§Ø®ØªÛŒØ¯! Ø¹Ø¯Ø¯ ${secretNumber} Ø¨ÙˆØ¯`, '');
                    mysteryNumber.textContent = secretNumber;
                    guessInput.disabled = true;
                    checkBtn.disabled = true;
                    
                    message.style.background = 'linear-gradient(135deg, #f44336 0%, #e53935 100%)';
                    message.style.color = 'white';
                    document.body.style.background = 'linear-gradient(135deg, #f44336 0%, #e53935 100%)';
                    
                    gamesPlayed++;
                    gamesPlayedDisplay.textContent = gamesPlayed;
                    localStorage.setItem('gamesPlayed', gamesPlayed);
                    
                    addToHistory(guess, 'âŒ Ø¨Ø§Ø®Øª');
                } else {
                    const difference = Math.abs(guess - secretNumber);
                    let feedback;
                    
                    if (difference <= 5) {
                        feedback = 'ğŸ”¥ Ø®ÛŒÙ„ÛŒ Ù†Ø²Ø¯ÛŒÚ©!';
                        showEmojiAnimation('ğŸ”¥');
                    } else if (difference <= 10) {
                        feedback = 'ğŸ˜Š Ù†Ø²Ø¯ÛŒÚ©!';
                    } else if (difference <= 20) {
                        feedback = guess > secretNumber ? 'â¬‡ï¸ Ú©Ù…ÛŒ Ú©Ù…ØªØ±' : 'â¬†ï¸ Ú©Ù…ÛŒ Ø¨ÛŒØ´ØªØ±';
                    } else {
                        feedback = guess > secretNumber ? 'â¬‡ï¸â¬‡ï¸ Ø®ÛŒÙ„ÛŒ Ú©Ù…ØªØ±' : 'â¬†ï¸â¬†ï¸ Ø®ÛŒÙ„ÛŒ Ø¨ÛŒØ´ØªØ±';
                    }
                    
                    displayMessage(feedback, '');
                    addToHistory(guess, feedback);
                }
            }
            
            guessInput.value = '';
            guessInput.focus();
        }
        
        // Event Listeners
        checkBtn.addEventListener('click', checkGuess);
        
        // ÙØ´Ø§Ø± Enter Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ
        guessInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                checkGuess();
            }
        });
        
        // Ø¯Ú©Ù…Ù‡ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
        againBtn.addEventListener('click', startNewGame);
        
        // Ù…ÛŒØ§Ù†Ø¨Ø± Ú©ÛŒØ¨ÙˆØ±Ø¯: Ctrl + N Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                startNewGame();
            }
        });
        
        // Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ ÙØ±Ù… Ø¨Ø§ Enter
        guessInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
            }
        });
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø§ÙˆÙ„
        startNewGame();
        
        console.log('âœ… Ø¨Ø§Ø²ÛŒ Ø­Ø¯Ø³ Ø¹Ø¯Ø¯ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª!');
        console.log('ğŸ® Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø²: addEventListener, Event Object, Keyboard Events, preventDefault');
    </script>
</body>
</html>